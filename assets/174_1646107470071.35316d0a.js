import{T,v as B}from"./12_1646107470070.2402e68a.js";import{p as E}from"./217_1646107470071.1d0cdb70.js";import{b as D}from"./214_1646107470071.d3ea4dcb.js";import{u as _}from"./216_1646107470071.65f6909a.js";import{u as L}from"./271_1646107470071.402c231e.js";import{u as R}from"./238_1646107470071.332b72aa.js";import{P as K}from"./266_1646107470071.270c10ea.js";import{I as F}from"./51_1646107470071.bdddd8d1.js";import{O as G}from"./63_1646107470071.c2efb022.js";import{d as H,a as N,w as $,n as M,g as U,v as V,x as Y,p as Z,c as s,T as j,F as q,u as J,m as Q}from"./99_1646107470071.061e8854.js";import{c as W}from"./212_1646107470071.0be6c938.js";import{H as X}from"./210_1646107470071.9ae98a10.js";import{e as ee}from"./205_1646107470071.39407b98.js";import{a as m}from"./206_1646107470071.003cb2a8.js";import{c as oe}from"./208_1646107470071.5fc6660f.js";import{a as h}from"./221_1646107470071.720069d0.js";import{i as ne}from"./211_1646107470071.1d78eb72.js";const te=ee({},E,{round:Boolean,position:m("center"),closeIcon:m("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:m("top-right"),safeAreaInsetBottom:Boolean}),[ae,I]=oe("popup");let P=2e3;var xe=H({name:ae,inheritAttrs:!1,props:te,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:n,attrs:v,slots:d}){let a,r;const f=h(),l=h(),k=R(()=>e.show||!e.lazyRender),x=N(()=>{const o={zIndex:f.value};if(ne(e.duration)){const t=e.position==="center"?"animationDuration":"transitionDuration";o[t]=`${e.duration}s`}return o}),y=()=>{a||(e.zIndex!==void 0&&(P=+e.zIndex),a=!0,f.value=++P,n("open"))},i=()=>{a&&W(e.beforeClose,{done(){a=!1,n("close"),n("update:show",!1)}})},C=o=>{n("click-overlay",o),e.closeOnClickOverlay&&i()},p=()=>{if(e.overlay)return s(G,{show:e.show,class:e.overlayClass,zIndex:f.value,duration:e.duration,customStyle:e.overlayStyle,onClick:C},{default:d["overlay-content"]})},O=o=>{n("click-close-icon",o),i()},b=()=>{if(e.closeable)return s(F,{role:"button",tabindex:0,name:e.closeIcon,class:[I("close-icon",e.closeIconPosition),X],classPrefix:e.iconPrefix,onClick:O},null)},S=()=>n("opened"),A=()=>n("closed"),g=o=>n("keydown",o),z=k(()=>{var o;const{round:t,position:c,safeAreaInsetBottom:u}=e;return J(s("div",Q({ref:l,style:x.value,class:[I({round:t,[c]:c}),{"van-safe-area-bottom":u}],onKeydown:g},v),[(o=d.default)==null?void 0:o.call(d),b()]),[[B,e.show]])}),w=()=>{const{position:o,transition:t,transitionAppear:c}=e,u=o==="center"?"van-fade":`van-popup-slide-${o}`;return s(T,{name:t||u,appear:c,onAfterEnter:S,onAfterLeave:A},{default:z})};return $(()=>e.show,o=>{o&&!a&&(y(),v.tabindex===0&&M(()=>{var t;(t=l.value)==null||t.focus()})),!o&&a&&(a=!1,n("close"))}),_({popupRef:l}),L(l,()=>e.show&&e.lockScroll),D("popstate",()=>{e.closeOnPopstate&&(i(),r=!1)}),U(()=>{e.show&&y()}),V(()=>{r&&(n("update:show",!0),r=!1)}),Y(()=>{e.show&&(i(),r=!0)}),Z(K,()=>e.show),()=>e.teleport?s(j,{to:e.teleport},{default:()=>[p(),w()]}):s(q,null,[p(),w()])}});export{xe as s};
