import{T as g,v as B}from"./12_1646106533727.187383e5.js";import{p as E}from"./220_1646106533728.d9cf5425.js";import{b as D}from"./217_1646106533728.095bf57e.js";import{u as _}from"./219_1646106533728.7788bee4.js";import{u as L}from"./271_1646106533728.404bbe3d.js";import{u as R}from"./252_1646106533728.985f2f6f.js";import{P as K}from"./266_1646106533728.a26a27e4.js";import{I as F}from"./51_1646106533728.feeadba0.js";import{O as G}from"./63_1646106533728.947c7693.js";import{d as H,c as N,w as $,n as q,b as M,v as U,x as V,p as Y,e as s,T as Z,F as j,u as J,q as Q}from"./99_1646106533728.fafcee2a.js";import{c as W}from"./228_1646106533728.4d209677.js";import{H as X}from"./226_1646106533728.1fb61177.js";import{e as ee}from"./221_1646106533728.4839a98d.js";import{a as m}from"./222_1646106533728.9937b289.js";import{c as oe}from"./224_1646106533728.df7cc49a.js";import{a as h}from"./214_1646106533728.5dae0ced.js";import{i as ne}from"./227_1646106533728.e0a33414.js";const te=ee({},E,{round:Boolean,position:m("center"),closeIcon:m("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:m("top-right"),safeAreaInsetBottom:Boolean}),[ae,I]=oe("popup");let P=2e3;var xe=H({name:ae,inheritAttrs:!1,props:te,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:n,attrs:v,slots:d}){let a,r;const f=h(),l=h(),k=R(()=>e.show||!e.lazyRender),x=N(()=>{const o={zIndex:f.value};if(ne(e.duration)){const t=e.position==="center"?"animationDuration":"transitionDuration";o[t]=`${e.duration}s`}return o}),y=()=>{a||(e.zIndex!==void 0&&(P=+e.zIndex),a=!0,f.value=++P,n("open"))},i=()=>{a&&W(e.beforeClose,{done(){a=!1,n("close"),n("update:show",!1)}})},C=o=>{n("click-overlay",o),e.closeOnClickOverlay&&i()},p=()=>{if(e.overlay)return s(G,{show:e.show,class:e.overlayClass,zIndex:f.value,duration:e.duration,customStyle:e.overlayStyle,onClick:C},{default:d["overlay-content"]})},b=o=>{n("click-close-icon",o),i()},O=()=>{if(e.closeable)return s(F,{role:"button",tabindex:0,name:e.closeIcon,class:[I("close-icon",e.closeIconPosition),X],classPrefix:e.iconPrefix,onClick:b},null)},S=()=>n("opened"),A=()=>n("closed"),z=o=>n("keydown",o),T=k(()=>{var o;const{round:t,position:c,safeAreaInsetBottom:u}=e;return J(s("div",Q({ref:l,style:x.value,class:[I({round:t,[c]:c}),{"van-safe-area-bottom":u}],onKeydown:z},v),[(o=d.default)==null?void 0:o.call(d),O()]),[[B,e.show]])}),w=()=>{const{position:o,transition:t,transitionAppear:c}=e,u=o==="center"?"van-fade":`van-popup-slide-${o}`;return s(g,{name:t||u,appear:c,onAfterEnter:S,onAfterLeave:A},{default:T})};return $(()=>e.show,o=>{o&&!a&&(y(),v.tabindex===0&&q(()=>{var t;(t=l.value)==null||t.focus()})),!o&&a&&(a=!1,n("close"))}),_({popupRef:l}),L(l,()=>e.show&&e.lockScroll),D("popstate",()=>{e.closeOnPopstate&&(i(),r=!1)}),M(()=>{e.show&&y()}),U(()=>{r&&(n("update:show",!0),r=!1)}),V(()=>{e.show&&(i(),r=!0)}),Y(K,()=>e.show),()=>e.teleport?s(Z,{to:e.teleport},{default:()=>[p(),w()]}):s(j,null,[p(),w()])}});export{xe as s};
