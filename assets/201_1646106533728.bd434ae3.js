import{m as y,u as C}from"./257_1646106533728.cda10dc4.js";import{s as p}from"./276_1646106533728.ffdbe242.js";import{e as a,i as b}from"./221_1646106533728.4839a98d.js";import{w as M}from"./229_1646106533728.77aa2feb.js";import{b as x}from"./227_1646106533728.e0a33414.js";import{a as I}from"./214_1646106533728.5dae0ced.js";import{w as P,z as k,e as D,q as S}from"./99_1646106533728.fafcee2a.js";const d={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let o=[],c=!1,i=a({},d);const l=new Map;function m(e){return x(e)?e:{message:e}}function T(){const{instance:e,unmount:t}=y({setup(){const n=I(""),{open:g,state:u,close:v,toggle:O}=C(),h=()=>{c&&(o=o.filter(r=>r!==e),t())},w=()=>D(p,S(u,{onClosed:h,"onUpdate:show":O}),null);return P(n,r=>{u.message=r}),k().render=w,{open:g,clear:v,message:n}}});return e}function q(){if(!o.length||c){const e=T();o.push(e)}return o[o.length-1]}function s(e={}){if(!b)return{};const t=q(),n=m(e);return t.open(a({},i,l.get(n.type||i.type),n)),t}const f=e=>t=>s(a({type:e},m(t)));s.loading=f("loading");s.success=f("success");s.fail=f("fail");s.clear=e=>{var t;o.length&&(e?(o.forEach(n=>{n.clear()}),o=[]):c?(t=o.shift())==null||t.clear():o[0].clear())};function z(e,t){typeof e=="string"?l.set(e,t):a(i,e)}s.setDefaultOptions=z;s.resetDefaultOptions=e=>{typeof e=="string"?l.delete(e):(i=a({},d),l.clear())};s.allowMultiple=(e=!0)=>{c=e};s.install=e=>{e.use(M(p)),e.config.globalProperties.$toast=s};export{s as T};
